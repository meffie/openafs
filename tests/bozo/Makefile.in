
srcdir=@srcdir@
abs_top_builddir=@abs_top_builddir@
include @TOP_OBJDIR@/src/config/Makefile.config
include @TOP_OBJDIR@/src/config/Makefile.pthread

TESTS = bos-t server-mock

MODULE_CFLAGS=\
  -I$(TOP_OBJDIR) \
  -I$(srcdir)/../common/

MODULE_LIBS=\
  ../tap/libtap.a \
  $(abs_top_builddir)/src/auth/liboafs_auth.la \
  $(LIB_roken) \
  $(LIBS) \
  $(XLIBS)

COMMON_OBJS=\
  ../common/config.o \
  ../common/servers.o \
  ../common/network.o \
  ../common/misc.o

all check test tests: $(TESTS)

bos-t: bos-t.o $(COMMON_OBJS)
	$(LT_LDRULE_static) bos-t.o $(COMMON_OBJS) $(MODULE_LIBS)

server-mock: server-mock.o
	$(LT_LDRULE_static) server-mock.o $(LIBS) $(XLIBS)

clean:
	$(LT_CLEAN)
	rm -f *.o $(TESTS)
