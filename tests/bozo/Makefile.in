
srcdir=@srcdir@
abs_top_srcdir=@abs_top_srcdir@
abs_top_builddir=@abs_top_builddir@
include @TOP_OBJDIR@/src/config/Makefile.config
include @TOP_OBJDIR@/src/config/Makefile.lwp

BINS = bosconfig-t

MODULE_CFLAGS = \
  -I$(TOP_OBJDIR) \
  -I$(abs_top_srcdir)/tests/common/ \
  -I$(abs_top_srcdir)/src/bozo

# Note: libauth is only needed due to a bug in libafstest.
MODULE_LIBS = \
  $(abs_top_builddir)/tests/common/libafstest_common.la \
  $(abs_top_builddir)/lib/util.a \
  $(abs_top_builddir)/lib/libopr.a \
  $(abs_top_builddir)/lib/libcmd.a \
  $(abs_top_builddir)/lib/liblwp.a \
  $(abs_top_builddir)/lib/libprocmgmt.a \
  $(XLIBS)

all check test tests: $(BINS)

bosconfig-t: bosconfig-t.o \
	         mock-bnode.o \
	         $(abs_top_builddir)/src/bozo/bnode.o \
	         $(abs_top_builddir)/src/bozo/bosconfig.o
	$(LT_LDRULE_static) bosconfig-t.o mock-bnode.o\
	  $(abs_top_builddir)/src/bozo/bnode.o \
	  $(abs_top_builddir)/src/bozo/bosconfig.o \
	  $(MODULE_LIBS)

clean:
	$(LT_CLEAN)
	rm -f *.o $(BINS)
